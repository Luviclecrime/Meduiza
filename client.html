<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Récompense de Parrainage</title>
  <!-- Inclure le CSS Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .progress-bar {
      text-align: center;
      font-weight: bold;
    }
    .copy-btn {
      margin-top: 15px;
    }
    body {
      background-color: #e0f7e0;
      color: #005f00;
    }
    .referral-section {
      border: 2px solid #009900;
      padding: 20px;
      border-radius: 10px;
      background-color: #d0ffd0;
    }
    .progress {
      height: 35px;
    }
    h1, h3 {
      color: #004d00;
    }
    h5 {
      color: #008000;
    }
    .reward-message {
      font-style: italic;
      font-size: 1.1em;
    }
  </style>
</head>
<body>
  <div class="container text-center my-5">
    <h1>Programme de Récompense</h1>

    <!-- Section affichant le nombre d'invités -->
    <div class="referral-section my-4">
      <h3>Total des Invitations : <span id="invite-count">0</span></h3>
    </div>

    <!-- Progression des niveaux -->
    <div class="mb-4">
      <h5>Palier 1 : 5%</h5>
      <div class="progress">
        <div id="progress-lv1" class="progress-bar bg-success" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
      </div>
    </div>

    <div class="mb-4">
      <h5>Palier 2 : 10%</h5>
      <div class="progress">
        <div id="progress-lv2" class="progress-bar bg-success" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
      </div>
    </div>

    <div class="mb-4">
      <h5>Palier 3 : 15%</h5>
      <div class="progress">
        <div id="progress-lv3" class="progress-bar bg-warning" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
      </div>
    </div>

    <div class="mb-4">
      <h5>Palier 4 : 20%</h5>
      <div class="progress">
        <div id="progress-lv4" class="progress-bar bg-danger" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
      </div>
    </div>

    <div class="mb-4">
      <h5>Palier Final</h5>
      <div class="progress">
        <div id="progress-ultimate" class="progress-bar bg-dark" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
      </div>
    </div>

    <!-- Message de récompense -->
    <div class="reward-message my-4">
      <p>INVITEZ 20 PERSONNES ET GAGNEZ UN BONUS MENSUEL DE 15 000 XAF !</p>
    </div>

    <!-- Lien de parrainage -->
    <div class="my-4 referral-section">
      <p>Voici votre lien de parrainage :</p>
      <p><strong id="referral-link"></strong></p>
      <button id="copy-btn" class="btn btn-outline-success copy-btn">Copier le lien</button>
    </div>
  </div>

  <!-- Inclure Bootstrap JS et un script de gestion -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Générer un identifiant unique pour l'utilisateur (par exemple, un nombre aléatoire)
    function generateUniqueId() {
      return Math.floor(Math.random() * 1000000); // Génère un ID entre 0 et 999999
    }

    const uniqueId = generateUniqueId();
    const referralLink = `https://medusar.vercel.app/?ref=${uniqueId}`;
    
    // Afficher le lien de parrainage avec l'ID unique
    document.getElementById('referral-link').textContent = referralLink;

    // Fonction de mise à jour des barres de progression
    function updateProgress() {
      let progress1 = 0;
      let progress2 = 0;
      let progress3 = 0;
      let progress4 = 0;
      let ultimateProgress = 0;

      document.getElementById('progress-lv1').style.width = progress1 + '%';
      document.getElementById('progress-lv1').textContent = progress1 + '%';

      document.getElementById('progress-lv2').style.width = progress2 + '%';
      document.getElementById('progress-lv2').textContent = progress2 + '%';

      document.getElementById('progress-lv3').style.width = progress3 + '%';
      document.getElementById('progress-lv3').textContent = progress3 + '%';

      document.getElementById('progress-lv4').style.width = progress4 + '%';
      document.getElementById('progress-lv4').textContent = progress4 + '%';

      document.getElementById('progress-ultimate').style.width = ultimateProgress + '%';
      document.getElementById('progress-ultimate').textContent = ultimateProgress + '%';
    }

    updateProgress();

    // Copier le lien dans le presse-papier
    document.getElementById('copy-btn').addEventListener('click', function() {
      navigator.clipboard.writeText(referralLink).then(() => {
        alert('Lien copié avec succès !');
      }).catch(err => {
        alert('Erreur de copie : ' + err);
      });
    });
  </script>
</body>
</html>